(executable
 (name illuaminate)
 (public_name illuaminate)
 (libraries containers cmdliner illuaminate.core illuaminate.parser
   illuaminate.semantics illuaminate.lint illuaminate.config
   illuaminate.pattern)
 (modes native js byte)
 (js_of_ocaml
  (javascript_files runtime.js)
  (flags "--opt=3" "--custom-header=#!/usr/bin/env node")))

(rule
 (target illuaminate.min.exe)
 (deps illuaminate.exe)
 (action
  (run upx -o %{target} %{deps})))
